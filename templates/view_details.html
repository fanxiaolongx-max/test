{% extends "base.html" %}
{% block content %}
<div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-lg mx-auto">
    <h1 class="text-3xl font-bold text-center text-indigo-600 mb-6">详情 - (ID: {{ demand['id'] }})</h1>
    <div class="space-y-4 text-left text-gray-700">
        {% for field in fields %}
        <p><strong>{{ field['label'] }}:</strong> 
        {% if field['type'] == 'file' %}
            {% if demand_data[field['name']] %}
            <img src="{{ url_for('uploaded_file', filename=demand_data[field['name']]) }}" alt="{{ field['label'] }}" class="mt-2 rounded-md">
            {% else %}
            N/A
            {% endif %}
        {% else %}
            {{ demand_data[field['name']] }}
        {% endif %}
        </p>
        {% endfor %}
        <p><strong>发布日期:</strong> {{ demand['post_date'] }}</p>
        <p><strong>状态:</strong> {{ demand['status'] }}</p>
    </div>
    <div class="mt-8 text-center space-x-4">
        {% if session['is_admin'] or (demand['user_id'] == session['user_id'] and demand['status'] == 'open') %}
            <a href="{{ url_for('edit_demand', demand_id=demand['id']) }}" class="text-sm text-blue-600 hover:underline">编辑</a>
            <a href="{{ url_for('delete_demand', demand_id=demand['id']) }}" class="text-sm text-red-600 hover:underline">删除</a>
        {% endif %}
    </div>
</div>
{% endblock %}
